‚úÖ SQL Injection - Prepared statements no Database //S√≥ o Database protege contra SQL Injection
‚úÖ XSS B√°sico - strip_tags() na sanitiza√ß√£o  // sanitiza√ßao so no service
‚úÖ Privilege Escalation - Valida√ß√£o de admin por UUID(id1b4e28ba-2fa1-11d2-883f-0016d3cca427) // no script do banco mesmo
‚úÖ SENHA HASH - seguran√ßa em senhas
‚úÖ MIDLEWARE - protege contra acessos indevidos a urls 


NO FRONT END, para ofuscament de endpoints:
‚úîÔ∏è Minifica√ß√£o
‚úîÔ∏è Ofusca√ß√£o simples
‚úîÔ∏è Compress√£o
‚úîÔ∏è Bundling
‚úîÔ∏è Hashing de arquivos
‚úîÔ∏è Otimiza√ß√£o autom√°tica


(teoricamente eu precisaria de uma classe de autentica√ßao de users(admin e comum), mas prefiri integrar nas classes de oper√ßao de UsersService e Chamados Service, pois sao so duas classes)
meu_projeto/
‚îÇ
‚îú‚îÄ‚îÄ backend/                  # API RESTful (PHP puro COMPATIVEL COM A HOSTGATOR)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Model.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Database.php
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/      # Controladores API (retornam JSON)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Api/          # Pasta espec√≠fica para APIs
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserController.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductController.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/           # Models (entidades de neg√≥cio)
‚îÇ   ‚îÇ   ‚îÇ    ‚îú‚îÄ‚îÄ User.php      # Entidade User
‚îÇ   ‚îÇ   ‚îÇ    ‚îî‚îÄ‚îÄ Product.php   # Entidade Product
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/         # Camada de Servi√ßos  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories/     # Padr√£o Repository
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ config/               # Configura√ß√µes
‚îÇ       ‚îî‚îÄ‚îÄ routes.php
‚îÇ   ‚îî‚îÄ‚îÄ public/
‚îÇ       ‚îî‚îÄ‚îÄ index.php         # Front Controller da API
‚îÇ
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ frontend/                 # Aplica√ß√£o Front-End (Separada)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ html/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ js/ 
‚îÇ   ‚îî‚îÄ‚îÄ ‚îî‚îÄ‚îÄ images/
‚îÇ   
‚îÇ
‚îî‚îÄ‚îÄ vendor/                   # Depend√™ncias (Composer)




16 APIS(FUN√áOES) UNICAS = 20 ENDPOINTS

------PAINEL LOGIN
 api - de login verificando, nome completo e senha
 
------PAINEL TI
.LISTA DE CHAMADOS ABERTOS + FINALIZADOS
 fun√ßao de pesquisa
 (adicionar filtro no fornt de abertos e finalizados)
 api - get full chamados abertos/finalizados com filtro, tipo, nome, setor, data e id chamado 
.POPUP DE EDI√áAO E FINALIZA√áAO DE CHAMADOS EM ABERTO
 api de modifica√ßao de nome - numero - setor - tipo - descri√ßao - fotos(6) - data 
 api de puxar dados do chamado, nome - numero - setor - tipo - descri√ßao - fotos(6) - data - id
 api de finalizar pedido (mudar status enum de aberto pra finalizado)
 api de deletar chamado
.POPUP DE EDI√áAO E REABERTURA DE CHAMADOS FINALIZADOS
 api de puxar dados do chamado, nome - numero - setor - tipo - descri√ßao - fotos(6) - data
 api de deletar chamado
 api de reabrir chamado (mudar status enum)
.POPUP USUARIO
 api - puxar dados do usuario(numero, senha, id, nome)
 api - altera√ßao de nome, senha e numero
.POPUP USUARIOS LISTA
 fun√ßao de pesquisa
 api - get full usuarios nome, setor, id com filtro, tipo, nome, setor, data e id chamado 
.POPUP  EDI√áAO USUARIO
 api de modifica√ßao de nome - numero - senha - setor
 api de puxar dados do usuario, nome - numero - senha - setor - id
 api de deletar usuario
.POPUP CRIAR USUARIO
 api de cria√ßao de usuario, nome - numero - senha - setor e id gerado automaticamente
.LISTA SEUS CHAMADOS
 fun√ßao de pesquisa
 api - get full chamados q tem o setor ti - tipo, pessoa, setor e data
+
botao de edi√ßao
 api de modifica√ßao de nome - setor - tipo - descri√ßao - numero - descri√ßao - fotos(6) - data
 api de puxar dados do chamado nome - setor - tipo - descri√ßao - numero - descri√ßao - fotos(6) - data - id
 api de deletar chamado
 api de finalizar chamado (mudar status enum)
.ABRIR CHAMADO
 api  - cadastro de chamado,  nome, numero, setor, tipo, data automatica, gerando id automatico, descri√ßao e fotos(6)


------PAINEL FUNCIONARIO
.LISTA SEUS CHAMADOS
 fun√ßao de pesquisa
 api - getfullchamadomeuuser q tem o nome, tipo, setor e data + descricao e fotos(6)
+
botao de edi√ßao
 api de modifica√ßao(update) de - tipo - descri√ßao - fotos(6)
 reaproveitamento da api de getfullchamadomeuuser
.ABRIR CHAMADO
 api  - cadastro de chamado puxando(nome, numero, setor), tipo, data automatica, gerando id automatico, descri√ßao e fotos(6)
.POPUP USUARIO
 api - puxar dados do usuario(numero, senha, nome)
 api - altera√ßao de nome, senha e numero









                             -TESTES SERIVOR PHP E MYSQL-


--userAdmBig
--secsistemas37666451829369Rr@

--userAdm
--secsistemas37666451829369Rr@w 

--vamos criar um id diferente como se fosse uma chave numerica, quase impossivel de chutar o id admin ate acertar


('Jo√£o da Silva', 'senhaCriptografada123', 'TI'),

('Maria Oliveira', 'senhaCriptografada456', 'ADMINISTRATIVO');

--senhas pra entrar em contas

cd "C:\Users\rodri\Downloads\PROJETO CHAMADO TI\back"
cd "C:\Users\rodrigo\Downloads\PROJETO CHAMADO TI\back"
php -S localhost:8001 index.php
live server

& "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysql.exe" -u userAdm -p
userAdm
secsistemas37666451829369Rr@


////////////////////////////////////////////////////////////////////////////////////////







revisao geral -> dominio(visoluxti) e hostigator





                




IMPLEMENTAR MIDLEWARE PARA BLOQUEAR PGS









criar escapes contra xss

NO FRONT END, para ofuscament de endpoints:
‚úîÔ∏è Minifica√ß√£o
‚úîÔ∏è Ofusca√ß√£o simples
‚úîÔ∏è Compress√£o
‚úîÔ∏è Bundling
‚úîÔ∏è Hashing de arquivos
‚úîÔ∏è Otimiza√ß√£o autom√°tica


implanta melhoria fotos:

A forma correta, mais segura e mais comum de manipular imagens em um sistema N√ÉO √© salvar a imagem inteira no MySQL como LONGBLOB.
At√© funciona, mas n√£o √© o ideal ‚Äî fica pesado, lento e dif√≠cil de escalar.
Vou te explicar a forma profissional de fazer isso, e porque ela √© melhor.
‚úÖ Maneira Correta de Manipular Imagens em Sistemas Web
1. O backend (PHP) recebe o arquivo
Quando o usu√°rio faz upload, o PHP recebe a imagem em $_FILES.
Exemplo simples:
$arquivo = $_FILES['imagem'];
‚ùå ERRADO (mas funciona): Salvar a imagem inteira no banco
imagem LONGBLOB
Por que √© ruim:
Banco cresce r√°pido e fica lento
Backup/exporta√ß√£o fica gigantesco
Rede fica mais lenta, pois a imagem trafega junto com a query
Dificulta cache no front
Dif√≠cil servir em CDN futuramente
‚úÖ CERTO: Salvar no servidor e guardar s√≥ o caminho no MySQL
Fluxo correto
Upload ‚Üí PHP salva o arquivo na pasta (ex: uploads/)
Banco armazena apenas o path (ex: /uploads/foto_123.jpg)
Front acessa a URL normalmente <img src="/uploads/foto_123.jpg">
Exemplo PHP
$arquivo = $_FILES['imagem'];
$nome = uniqid() . "-" . $arquivo['name'];
$caminho = "uploads/" . $nome;
move_uploaded_file($arquivo['tmp_name'], $caminho);
// Salvar no banco s√≥ o caminho
$stmt = $pdo->prepare("INSERT INTO usuarios (foto) VALUES (?)");
$stmt->execute([$caminho]);
üéØ Por que essa forma √© a mais usada?
‚úî Muito mais r√°pido
Imagens n√£o ficam dentro do banco, deixando ele leve.
‚úî Melhor para escalar
Futuramente voc√™ pode mover a pasta para:
Amazon S3
Google Cloud Storage
CDN
E nada muda no c√≥digo.
‚úî F√°cil de exibir no frontend
S√≥ usar:
<img src="<?= $row['foto'] ?>">
üì¶ Como transportar para o back-end?
Voc√™ envia a imagem com:
const formData = new FormData();
formData.append("imagem", input.files[0]);
fetch("/upload.php", {
  method: "POST",
  body: formData
});
Backend recebe via $_FILES, n√£o via base64.
‚ùì Ent√£o quando usar LONGBLOB?
Somente quando:
Precisa que tudo esteja 100% no banco (raro)
√â um arquivo muito pequeno
√â algo que n√£o ser√° servido publicamente (ex: assinatura digital)
Para sistemas comuns ‚Üí n√£o use LONGBLOB.
üìå Resumindo
Forma	Correto?	Por qu√™
Salvar imagem no MySQL (LONGBLOB)	‚ùå Ruim	Lento, pesado, banco gigante
Salvar arquivo em pasta e guardar caminho	‚úÖ Ideal	R√°pido, padr√£o do mercado
Enviar imagem como base64	‚ùå Ruim	Aumenta tamanho + lento
Enviar com FormData (arquivo puro)	‚úÖ Correto	Padr√£o web
Se quiser, te mostro o c√≥digo completo (upload ‚Üí salvar ‚Üí exibir) com seguran√ßa (MIME check, renomea√ß√£o, pasta organizada). 
entendi ent compensa salvar numa pasta dentro so sistema ent, ae ela fica la no servidor e o banco so puxa o q tem nessa pasta







separar scripst

/projeto
|-- /css
|   |-- styles.css (j√° existe)
|   |-- chamado.css <--- NOVO
|-- /js
|   |-- urls-amigaveis.js (j√° existe)
|   |-- chamado.js <--- NOVO
|-- /paginas
|   |-- UserComumAbrirChamado.html <--- MODIFICADO


// chamado.js
// O c√≥digo JavaScript n√£o precisa da tag <script> dentro do arquivo .js
//PEGAR O ID POS LOGIN
const userId = localStorage.getItem("userId");
if (!userId) {
    window.location.href = "../login.html";
}
const userBtn = document.getElementById('userBtn');
const popupOverlay = document.getElementById('popupOverlay'); //fundo escuro
const closePopup = document.getElementById('closePopup');
// ... (resto do seu JavaScript) ...
//TROCA SENHA E NUMERO
document.addEventListener('DOMContentLoaded', () => {
    const alterarUser = document.getElementById('alterarUser');
    const popupOverlay = document.getElementById('popupOverlay');
    // Pega o userId do localStorage dentro do DOMContentLoaded
    const idUser = localStorage.getItem("userId");
    // ... (resto do c√≥digo de troca de senha) ...
});
// [FIM DO JAVASCRIPT]


<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <link rel="icon" type="image/png" href="../../icon/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="../../icon/favicon.svg">
    <link rel="shortcut icon" href="../../icon/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="../../icon/apple-touch-icon.png">
    <link rel="manifest" href="../../icon/site.webmanifest">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chamados - Visolux TI</title>

    <link rel="stylesheet" href="../../styles.css">

    <link rel="stylesheet" href="../../css/chamado.css"> 
</head>

<body>

    <header>
        <img src="../../img/logo-x.png" alt="Logo da visolux" width="40" height="40" class="logo-img">
        <div class="logo">VISOLUX TI</div>
        <button class="user-btn" id="userBtn">
            <img src="../../img/user.png" alt="Logo do User" class="user-icon">
        </button>
    </header>

    <div class="popup-overlay" id="popupOverlay">
        <div class="popupEditarUserComum">
            <button class="close-btnX" id="closePopup">X</button>
            <h3>Editar Usu√°rio</h3>
            <input type="number" placeholder="Novo Numero">
            <input type="password" placeholder="Nova senha">
            <div>
                <button class="save-btn" id="alterarUser">Salvar</button>
                <div class="popup-deslogar">
                    <button class="logout-btn" id="logoutBtn">Encerrar Sess√£o</button>
                </div>
            </div>
        </div>
    </div>

    <div class="popup-overlay" id="chamadoPopupOverlay">
        <div class="popup-detalhes-chamado">
            <button class="close-btnX" id="closeChamadoPopup">X</button>
            <div class="detalhes-chamado-content">
                <div class="info-chamado-content2">
                    <div class="campo-detalhe">
                        <label>Tipo:</label>
                        <input type="text" id="popupTipoServico" value="Internet" readonly>
                    </div>
                    <div class="campo-detalhe">
                        <label>Nome:</label>
                        <input type="text" id="popupSolicitante" value="Carlos Silva" readonly>
                    </div>
                    <div class="campo-detalhe">
                        <label>Numero:</label>
                        <input type="text" id="popupNumero" value="(11) 98765-4321" readonly>
                    </div>
                    <div class="campo-detalhe">
                        <label>Id:</label>
                        <input type="text" id="popupId" value="CH-2024-00158" readonly>
                    </div>
                    <div class="campo-detalhe">
                        <label>Setor:</label>
                        <input type="text" id="popupSetor" value="Financeiro" readonly>
                    </div>
                    <div class="campo-detalhe">
                        <label>Data:</label>
                        <input type="text" id="popupData" value="15/03/2024" readonly>
                    </div>
                    <div class="campo-detalhe">
                        <label>Descri√ß√£o:</label>
                        <textarea id="popupDescricao"
                            readonly>Internet lenta e inst√°vel durante todo o dia, impossibilitando o acesso aos sistemas corporativos.</textarea>
                    </div>
                </div>

                <div class="campofotoAdmin">
                    <div>
                        <label>Fotos (JPG e PNG)</label>
                        </div>
                    <div class="imagens-preview" id="imagensPreviewPopup"></div>
                </div>
            </div>
        </div>
    </div>


    <main>
        <div class="container1" id="yourCalls">
            <h2>Seus Chamados</h2>
            <div class="call-list" id="listaChamados">
            </div>
        </div>

        <div class="container2" id="openCall">
            <h2>ABRIR CHAMADO</h2>
            <form>
                <div class="campoinfo">
                    <div>
                        <label>Tipo de Chamado:</label>
                        <select name="callType" required>
                            <option value="" disabled selected>Selecione o tipo de problema</option>
                            <option value="Internet">Internet</option>
                            <option value="Impressora">Impressora</option>
                            <option value="Computador">Computador</option>
                            <option value="Sistema">Sistema</option>
                            <option value="Monitor">Celular</option>
                            <option value="Monitor">Monitor</option>
                        </select>
                    </div>
                    <div>
                        <label>Data:</label>
                        <input type="date" name="date" id="dataChamado" required>
                    </div>
                    <div>
                        <label>Descri√ß√£o:</label>
                        <textarea name="description" placeholder="Descreva a situ√ß√£o com detalhes" required></textarea>
                    </div>
                </div>

                <div class="campofoto">
                    <div>
                        <label>Fotos (JPG e PNG ‚Ä¢ M√°ximo 6)</label>
                        <div class="upload-area" id="uploadAreaForm">
                            <div class="upload-placeholder">
                                <span style="color: blue; cursor: pointer;">üìÅ Arraste imagens aqui ou clique para selecionar</span>
                                <input type="file" id="fileInputForm" multiple accept="image/*" style="display: none;">
                            </div>
                        </div>
                        <div class="imagens-preview" id="imagensPreviewForm"></div>
                    </div>
                </div>
                <button type="submit" id="criar-chamado" class="submit-btn">Enviar Chamado</button>
            </form>
        </div>
        <div>
        </div>
    </main>

    <footer>
        ¬© 2025 VISOLUX & THOR ‚Äî Todos os direitos reservados
    </footer>


    <div id="modalImagem" class="modal-imagemAdmin">
        <span class="fechar-modalAdmin">&times;</span>
        <div class="modal-navegacaoAdmin">
            <button class="modal-btn-prev" id="modalPrev">‚¨Ö</button>
            <button class="modal-btn-next" id="modalNext">‚Æï</button>
        </div>
        <div class="modal-contadorAdmin" id="modalContador">1 / 4</div>
        <img class="conteudo-modalAdmin" id="imagemAmpliada">
    </div>

    <script src="../../js/chamado.js"></script>

    <script src="../../js/urls-amigaveis.js"></script>

</body>

</html>







CLUDFARE
